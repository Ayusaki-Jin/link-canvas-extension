/* ドラッグ&ドロップアニメーション */
.dragging {
    opacity: 0.8;
    transform: rotate(2deg) scale(1.05);
    z-index: 1000;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    transition: none;
}

.drag-ghost {
    opacity: 0.4;
    transform: scale(0.95);
    border-style: dashed;
}

/* ドロップ位置プレビュー */
.drop-preview {
    animation: dropPulse 1s infinite ease-in-out;
}

@keyframes dropPulse {

    0%,
    100% {
        border-color: #007acc;
        background-color: rgba(0, 122, 204, 0.1);
        transform: scale(1);
    }

    50% {
        border-color: #0056b3;
        background-color: rgba(0, 122, 204, 0.2);
        transform: scale(1.02);
    }
}

/* ホバー進行状況インジケーター */
.hover-indicator {
    animation: hoverProgress 0.8s linear;
    transition: all 0.2s ease;
}

@keyframes hoverProgress {
    0% {
        border-color: #007acc;
        background-color: rgba(0, 122, 204, 0.1);
        transform: scale(1);
    }

    25% {
        border-color: #17a2b8;
        background-color: rgba(23, 162, 184, 0.15);
    }

    50% {
        border-color: #ffc107;
        background-color: rgba(255, 193, 7, 0.2);
        transform: scale(1.03);
    }

    75% {
        border-color: #fd7e14;
        background-color: rgba(253, 126, 20, 0.25);
    }

    100% {
        border-color: #28a745;
        background-color: rgba(40, 167, 69, 0.3);
        transform: scale(1.05);
    }
}

/* グループ作成アニメーション */
.group-forming {
    animation: groupFormation 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes groupFormation {
    0% {
        opacity: 0;
        transform: scale(0.3) rotate(-5deg);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.1) rotate(1deg);
    }

    100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
}

/* タイル選択アニメーション */
.link-tile.selected {
    animation: tileSelect 0.3s ease-out;
}

@keyframes tileSelect {
    0% {
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    50% {
        transform: scale(1.05);
    }

    100% {
        transform: scale(1);
        box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.5);
    }
}

/* タイル追加アニメーション */
.tile-added {
    animation: tileAppear 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes tileAppear {
    0% {
        opacity: 0;
        transform: scale(0.3) translateY(-20px);
    }

    60% {
        opacity: 0.8;
        transform: scale(1.1) translateY(-5px);
    }

    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* タイル削除アニメーション */
.tile-removing {
    animation: tileRemove 0.4s ease-in forwards;
}

@keyframes tileRemove {
    0% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.5;
        transform: scale(1.1) rotate(5deg);
    }

    100% {
        opacity: 0;
        transform: scale(0.3) rotate(15deg);
    }
}

/* グループ展開/縮小アニメーション */
.group-area.expanding {
    animation: groupExpand 0.4s ease-out;
}

.group-area.collapsing {
    animation: groupCollapse 0.4s ease-out;
}

@keyframes groupExpand {
    0% {
        height: 60px;
        overflow: hidden;
    }

    100% {
        overflow: visible;
    }
}

@keyframes groupCollapse {
    0% {
        overflow: hidden;
    }

    100% {
        height: 60px;
        overflow: hidden;
    }
}

/* ホバーエフェクト */
.link-tile:hover {
    animation: tileHover 0.2s ease-out;
}

@keyframes tileHover {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(-2px);
    }
}

.group-header:hover {
    animation: headerGlow 0.3s ease-out;
}

@keyframes headerGlow {
    0% {
        filter: brightness(1);
    }

    100% {
        filter: brightness(1.2);
    }
}



/* コンテキストメニューアニメーション */
.context-menu {
    animation: menuSlideIn 0.2s ease-out;
    transform-origin: top left;
}

.context-menu.hidden {
    animation: menuSlideOut 0.15s ease-in;
}

@keyframes menuSlideIn {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(-10px);
    }

    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes menuSlideOut {
    0% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }

    100% {
        opacity: 0;
        transform: scale(0.8) translateY(-10px);
    }
}

/* 設定パネルアニメーション */
.settings-panel {
    animation: panelSlideIn 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.settings-panel.hidden {
    animation: panelSlideOut 0.2s ease-in;
}

@keyframes panelSlideIn {
    0% {
        opacity: 0;
        transform: translateX(20px) translateY(-10px) scale(0.9);
    }

    100% {
        opacity: 1;
        transform: translateX(0) translateY(0) scale(1);
    }
}

@keyframes panelSlideOut {
    0% {
        opacity: 1;
        transform: translateX(0) translateY(0) scale(1);
    }

    100% {
        opacity: 0;
        transform: translateX(20px) translateY(-10px) scale(0.9);
    }
}

/* ローディングアニメーション */
.loading-spinner {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* 成功/エラーフィードバック */
.success-flash {
    animation: successFlash 0.6s ease-out;
}

.error-flash {
    animation: errorFlash 0.6s ease-out;
}

@keyframes successFlash {

    0%,
    100% {
        background-color: transparent;
    }

    50% {
        background-color: rgba(40, 167, 69, 0.3);
    }
}

@keyframes errorFlash {

    0%,
    100% {
        background-color: transparent;
    }

    50% {
        background-color: rgba(220, 53, 69, 0.3);
    }
}

/* パフォーマンス最適化 */
.link-tile,
.group-area,
.context-menu,
.settings-panel {
    will-change: transform, opacity;
}

/* リデュースモーション対応 */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}